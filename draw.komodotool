{
  "keyboard_shortcut": "", 
  "name": "draw", 
  "value": [
    "################################################################################\n\nsub draw_[[%b]] {\n        \n\tmy ($data) = @_;\n\n\treturn\n\n\t\tdraw_table (\n\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tlabel  => ' ',\n\t\t\t\t\thidden =>\n\t\t\t\t\t\t$_REQUEST {fake} eq '0,-1'\n\t\t\t\t\t,\n\t\t\t\t},\n\t\t\t\t'\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435',\n\t\t\t],\n\n\t\t\tsub {\n\n\t\t\t\t__d ($i);\n\n\t\t\t\tdraw_cells ({\n\t\t\t\t\thref => \"/?type=[[%b]]&id=$$i{id}\",\n\t\t\t\t},[\n\t\n\t\t\t\t\t{\n\t\t\t\t\t\ttype   => 'checkbox',\n\t\t\t\t\t\tname   => \"_[[%b]]_$i->{id}\",\n\t\t\t\t\t\thidden =>\n\t\t\t\t\t\t\t$_REQUEST {fake} eq '0,-1'\n\t\t\t\t\t\t,\n#\t\t\t\t\t\toff    =>\n#\t\t\t\t\t\t\t$_USER -> {id} != $i -> {id_user}\n#\t\t\t\t\t\t\t&& $_USER -> {role} ne 'admin'\n#\t\t\t\t\t\t,\n\t\t\t\t\t},\n\n\t\t\t\t\t$i -> {label},\n\t\t\t\t\t!@#_currentPos!@#_anchor\n\t\t\t\t])\n\n\t\t\t},\n\n\t\t\t$data -> {[[%b]]},\n\n\t\t\t{\n\t\t\t\t\n\t\t\t\tname => 't1',\n\t\t\t\t\n\t\t\t\ttitle => {label => action_type_label},\n\n#\t\t\t\tpath => [\n#\t\t\t\t\t{name => '\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430', type => 'home_page', id => ''},\n#\t\t\t\t\t{name => action_type_label, type => '[[%b]]', id => ''},\n#\t\t\t\t],\n\n\t\t\t\ttop_toolbar => [{\n\t\t\t\t\t\tkeep_params => ['type', 'select'],\n\t\t\t\t\t},\n\n\t\t\t\t\t{\n\t\t\t\t\t\ticon  => 'create',\n\t\t\t\t\t\tlabel => '&\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c',\n\t\t\t\t\t\thref  => '?type=[[%b]]&action=create',\n\t\t\t\t\t},\n\n\n#\t\t\t\t\t{\n#\t\t\t\t\t\ticon    => 'delete',\n#\t\t\t\t\t\tlabel   => '\u0423\u0434\u0430\u043b\u0438\u0442\u044c',\n#\t\t\t\t\t\thref    => \"javaScript:if (confirm('\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 ...?')) {var f = document.forms['t1']; f.elements['action'].value='kill'; f.submit()} void(0);\",\n#\t\t\t\t\t\tconfirm => '',\n#\t\t\t\t\t\toff     =>\n#\t\t\t\t\t\t\t$_REQUEST {fake}\n#\t\t\t\t\t\t\t,\n#\t\t\t\t\t},\n\n#\t\t\t\t\t{\n#\t\t\t\t\t\ticon    => 'restore',\n#\t\t\t\t\t\tlabel   => '\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c',\n#\t\t\t\t\t\thref    => \"javaScript:if (confirm('\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u0441\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 ...?')) {var f = document.forms['t1']; f.elements['action'].value='unkill'; f.submit()} void(0);\",\n#\t\t\t\t\t\tconfirm => '',\n#\t\t\t\t\t\toff     =>\n#\t\t\t\t\t\t\t$_REQUEST {fake} != -1\n#\t\t\t\t\t\t\t,\n#\t\t\t\t\t},\n\n\n\t\t\t\t\t{\n\t\t\t\t\t\ttype  => 'input_text',\n\t\t\t\t\t\tlabel => '\u0418\u0441\u043a\u0430\u0442\u044c',\n\t\t\t\t\t\tname  => 'q',\n\t\t\t\t\t\tkeep_params => [],\n\t\t\t\t\t},\n\n\t\t\t\t\t{\n\t\t\t\t\t\ttype   => 'input_select',\n\t\t\t\t\t\tname   => 'id_...',\n\t\t\t\t\t\tvalues => $data -> {...},\n\t\t\t\t\t\tempty  => '[\u0412\u0441\u0435 ...]',\n\t\t\t\t\t},\n\n\t\t\t\t\t{\n\t\t\t\t\t\ttype    => 'pager',\n\t\t\t\t\t},\n\n\t\t\t\t\tfake_select (),\n\n\t\t\t\t],\n\t\t\t\t\n\t\t\t\ttoolbar => draw_centered_toolbar ({},[\n\n\t\t\t\t\t{\n\t\t\t\t\t\ticon  => 'create',\n\t\t\t\t\t\tlabel => '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c',\n\t\t\t\t\t\thref  => '?type=[[%b]]&action=create',\n\t\t\t\t\t\tkeep_esc => 1,\n\t\t\t\t\t},\n\n\t\t\t\t\t{\n\t\t\t\t\t\ticon    => 'delete',\n\t\t\t\t\t\tlabel   => '\u0423\u0434\u0430\u043b\u0438\u0442\u044c',\n\t\t\t\t\t\thref    => \"javaScript:if (confirm('\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 ...?')) {var f = document.forms['t1']; f.elements['action'].value='kill'; f.submit()} void(0);\",\n\t\t\t\t\t\tconfirm => '',\n\t\t\t\t\t\toff     =>\n\t\t\t\t\t\t\t$_REQUEST {fake}\n\t\t\t\t\t\t\t,\n\t\t\t\t\t},\n\n\t\t\t\t\t{\n\t\t\t\t\t\ticon    => 'restore',\n\t\t\t\t\t\tlabel   => '\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c',\n\t\t\t\t\t\thref    => \"javaScript:if (confirm('\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u0441\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 ...?')) {var f = document.forms['t1']; f.elements['action'].value='unkill'; f.submit()} void(0);\",\n\t\t\t\t\t\tconfirm => '',\n\t\t\t\t\t\toff     =>\n\t\t\t\t\t\t\t$_REQUEST {fake} != -1\n\t\t\t\t\t\t\t,\n\t\t\t\t\t},\n\n\t\t\t\t]),\n\n\t\t\t}\n\n\t\t);\n}\n\n"
  ], 
  "set_selection": "true", 
  "type": "snippet", 
  "indent_relative": "false"
}